---
title: Установка / Обновление / Удаление
layout: /src/layouts/autonum.astro
lastUpdated: 2025-05-01
---

# Установка
## Перед началом

-  Проект представляет собой **пользовательскую конфигурацию**. Конечно, с установкой GNOME в процессе будут установлены и многие базовые системные программы для интернета, блютуза и подобные, однако подразумевается, что вы их сами уже настроили
-  Рекомендуется EndeavourOS. Так будет чутка легче.
   - Любые другие дистрибутивы на Arch должны тоже нормально работать
   - У тебя дистрибутив не на Arch? Поищи свой на странице [Discussions](https://github.com/end-4/dots-hyprland/discussions) page
   - Совершенно необязательно ставить чистую систему ради дотфайлов!

## Автоматическая установка (только для дистрибутивов на Arch)
**Рекомендуемый метод**

Просто нужно ввести одну команду и следовать инструкциям скрипта
```bash
bash <(curl -s "https://ii.clsty.link/setup.sh")
```
Команда выше по умолчанию клонирует репозиторий в `~/.cache/dots-hyprland`. Место клонирования можно изменить добавив путь в конце:
```bash
bash <(curl -s "https://ii.clsty.link/setup.sh") ~/Downloads/dots-hyprland
```

:::note[Альтернативный метод]
Или просто сами клонируйте репозиторий и запустите скрипт:
```bash
t=~/.cache/dots-hyprland   # Пожалуй не будем мусорить в вашей домашней директории
git clone https://github.com/end-4/dots-hyprland.git "$t" --filter=blob:none
"$t"/install.sh
```
:::

:::tip[Совет]
Скрипт `install.sh` можно запускать несколько раз и выполнять только конкретные действия ввиду его интерактивности.
:::

## Для NixOS (экспериментально)
- На данный момент, эти дотфайлы (пока?) не предоставляются как flake..
- Но вы можете опробовать [end_4's NixOS flake](https://github.com/end-4/CirnOS)
  - Включает в себя конфигурацию для home-manager. Посмотрите папку 'homes'.

- Смотрите также https://github.com/end-4/dots-hyprland/discussions/1093

## Для OpenSUSE (экспериментально)
- Смотрите https://github.com/end-4/dots-hyprland/discussions/485

## Для Fedora (экспериментально)
- Смотрите https://github.com/EisregenHaha/fedora-hyprland

- Также посмотрите здесь (старое обсуждение): https://github.com/end-4/dots-hyprland/discussions/840

## Ручная установка (по сути вообще для любого дистрибутива)
:::note[Примечание для дистрибутивов не на Arch]
Вам самим придется найти эквиваленты пакетов из значения массива `depends` внутри `scriptdata/arch-packages/*/PKGBUILD` после установки зависимостей.
- Для получения информации о пакете (например, чтобы понять какие там исполняемые файлы), используйте поиск [Arch Linux Packages](https://archlinux.org/packages) или [AUR](https://aur.archlinux.org/packages).
- Если вам удалось успешно установить дотфайлы на какой-либо дистрибутив не на основе Arch, то будем крайне признательны, если вы поделитесь списком пакетов (и любыми другими шагами) в [Discussions](https://github.com/end-4/dots-hyprland/discussions), чтобы мы смогли автоматизировать установку в будущем. Заранее спасибо!
:::

- Клонируйте репозиторий и зайдите в директорию
  ```bash
  t=~/.cache/dots-hyprland   # Не будем мусорить
  git clone https://github.com/end-4/dots-hyprland.git "$t" --filter=blob:none
  cd "$t"
  ```
- Пакеты: установите пакеты из значения массива `depends` внутри `scriptdata/arch-packages/*/PKGBUILD'. Для Arch Linux просто используйте AUR-помощник, например, как yay.

- Запустите скрипт `manual-install-helper.sh` чтобы установить остальные зависимости.
  - Вы также можете установить другие подходящие зависимости, только не забудьте сделать 'git checkout' для необходимого коммита при установке AGS.
- Добавьте пользователя в группы `video` и `input`
  ```bash
  sudo usermod -aG video,input "$(whoami)" # если вдруг не работает, то замените "$(whoami)" именем пользователя 
  ```
- Скопируйте `.config`, `.local` в вашу домашнюю директорию (внимательно на этом шаге, иначе перезапишите ваши личные конфиги)

- Полезные горячие клавиши:
  - `Ctrl`+`Super`+`T` чтобы поменять обои
  - `Super`+`/` для шпаргалки с горячими клавишами. Развлекайтесь!

# После установки
## Желательно сделать
### Qt темы
- Выберите KVantum после запуска:
```sh
kcmshell6 kcm_style
kcmshell6 kcm_colors
```
### Устраните конфликты демонов уведомлений
- Демоны уведомлений, такие как `dunst` и `mako` могут быть заранее подстроены вашим дистрибутивом, и могут вмешиваться в работу AGS, если они запускаются первыми. Рекомендуется их удалить, если они больше нигде не используются.
## По желанию сделать
### Дополнительные конфиги
Может найдете что-то полезное в папке `Extras`.
### Интеграция мультимедия с браузером
Если вы хотите, чтобы показывалась плашка проигрываемых медия в браузера, установите расширение "Plasma browser integration".
- Для [Chromium](https://chrome.google.com/webstore/detail/plasma-integration/cimiefiiaegbelhefglklhhakcgmhkai)
- Для [Firefox](https://addons.mozilla.org/en-US/firefox/addon/plasma-integration/)

### Цветовая схема для ZSH
Добавьте эту строку в `~/.zshrc`, чтобы в ZSH поддерживались цветовые схемы:
```bash
source ~/.config/zshrc.d/dots-hyprland.zsh
```

## Запуск Hyprland
- Для запуска можно использовать экранный менеджер или `tty`.
- Вики Hyprland рекомендует запускать с помощью 'uswm', а я это доблестно игнорирую. В целом, все будет работать, но есть вероятность, что будет много автозагрузки из других сред рабочего стола (например, двойные окна аутентификации)

Смотрите [Hyprland wiki](https://wiki.hyprland.org/Getting-Started/Master-Tutorial/#launching-hyprland) для деталей. Ниже нескольно дополнительных советов.

### Как автоматически запускать Hyprland на `tty1`?
Для ZSH или BASH добавьте эту строку в **конец** вашего конфига `~/.zshrc` или `~/.bashrc`:
```bash
source ~/.config/zshrc.d/auto-Hypr.sh
```

Для FISH добавьте эту строку в  **конец** вашего конфига `~/.config/fish/config.fish`:
```fish
source ~/.config/fish/auto-Hypr.fish
```

Пы.Сы. Лучше выключить экранный менеджер, если хотите запускать через 'tty'.

### Я чайник. Что такое tty и экранный менеджер?

Что-ж, попробуем как можно проще.

Можно сказать, что `tty` это некая "основа" систем Линукс.
Обычно имеется 7 `tty`: с `tty1` по `tty7`. Можно нажимать `Ctrl+Alt+F<n>` чтобы переключаться на `tty<n>`, а далее вписывать свои логин и пароль для входа.

После входа можно запустить графическую среду, например `Hyprland`.
Вообще, большинство этих сред запускается **после** входа.

Но что делать если мы хотим сделать графическую среду для собственно интерфейса входа?

Вот тут на сцену выходят экранные менеджеры (или менеджер входа, или Display Manager, или просто DM).
- Самые популярные экранные менеджеры:
  - `sddm`: Часто используется с рабочей средой KDE Plasma.
  - `gdm`: Часто используется с рабочей средой Gnome.
- Они включаются на системном уровне и автоматически запускаются после включения системы (до входа).
  - На дистрибутивах с основой 'systemd' экранные менеджеры запускаются как 'systemd' сервис. Введи следующую команду, чтобы понять какой экранный менеджер сейчас включен.
    ```bash
    grep 'ExecStart=' /etc/systemd/system/display-manager.service
    ```
    Если выводит "No such file or directory", значит никакой экранный менеджер не включен, или у нас не 'systemd' основа.
- Они предоставляют графический интерфейс для входа и выбора графической среды (например Hyprland).
  - Откуда экранные менеджеры знают какие графические среды доступны?
    - Обычно, они производят поиск по пути `/usr/share/xsessions` для графического сервера X11, и по пути `/usr/share/wayland-sessions` для графического сервера Wayland.
    - Файлы в данных директориях содержат информацию о графических средах.

# Обновление
## После автоматической установки
- `cd` в директорию репозитория
- Запустите `git pull` чтобы загрузить последние изменения.
- Снова запустите `./install.sh`
  - Пропустите ненужные вам шаги (особенно те, что с `rsync ...`, иначе это **перезапишет ваши файлы**).
    Стоит оставить лишь шаги с `rsync`, которые касаются `.config/ags`.

Добавьте флаг `./install.sh -h` чтобы увидеть больше информации.
## После ручной установки
- `cd` в директорию репозитория
- Запустите `git pull` чтобы загрузить последние изменения.
- Скопируйте нужные файлы. Зачастую стоит копировать из папки `.config/ags`.
- Запустите `manual-install-helper.sh` чтобы обновить некоторые зависимости.

# Удаление
- Ручное удаление **крайне рекомендуется**
- На данный момент имеется скрипт для удаления, но он далек от идеала и не особо поддерживается.
- Вот многобукаф если интересно:

> Дело в том, что этот репозиторий не просто программа, а набор конфигураций.
> Следовательно, довольно сложно создать такой скрипт, который
> будет отменять все изменения сделанный установочным скриптом.
> 
> Например, скрипт устанавливает `yay` (AUR-помощник) даже если у вас его нет.
> Но что делать скрипту удаления, чтобы обратить эти изменения?
> - Удалить `yay` или `yay-bin`? Не совсем правильно, ведь у вас он уже мог быть он установлен (НЕ установочным скриптом).
> - Даже если бы скрипт сохранял список установленных пакетов, все равно не совсем правильно удалять 'yay' или 'yay-bin' когда он сохранился в логах, так как скрипт не может сохранять будущее. Вы, может, переустановили 'yay' или 'yay-bin' на следующий день после запуска скрипта, следовательно это уже не должно сохраняться в логах. Логично. 
> 
> Итого: практически невозможно написать "правильный" скрипт.
> Лучше обратить все изменения вручную по необходимости.

:::note[Текущее положение дел]
Так как мы сейчас используем локальные PKGBUILD файлы для дистрибутивов на основе Arch, 
скрипт `uninstall.sh` способен сносно удалять Arch/AUR пакеты, однако с файлами конфигураций
все по-прежнему не идеально.

Смотрите также https://github.com/end-4/dots-hyprland/issues/838#issuecomment-2406220007
:::
