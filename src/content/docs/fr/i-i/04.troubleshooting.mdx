---
title: Dépannage
layout: /src/layouts/autonum.astro
lastUpdated: 2025-10-14
---

:::caution
La version AGS d'illogical impulse n'est plus maintenue.

Bien qu'elle puisse encore fonctionner, vous devrez résoudre les éventuels problèmes de votre côté.

Les nouvelles demandes d'assistance pour la version AGS seront très probablement rejetées.
:::

:::tip[Astuce]
Sur cette page, appuyez sur `Ctrl`+`F` pour chercher ou voir la barre latérale droite pour trouver votre problème
:::

# Lecture obligatoire
## Prérequis pour la variable d'environnement
:::note
Nous vous avons déjà donné un avis connexe dans `install.sh` mais certains utilisateurs l'ont ignoré quand ils soumettaient des issues.
:::

La variable d'environnement `$ILLOGICAL_IMPULSE_VIRTUAL_ENV` doit être correctement définie, sinon la configuration AGS ne fonctionnera pas.

Nous avons fait une configuration par défaut dans `~/.config/hypr/hyprland/env.conf` mais vous devez vous assurer que ce fichier de configuration est inclus dans `~/.config/hypr/hyprland.conf`. Un redémarrage d'Hyprland est souvent requis.

Vous pouvez exécuter `./diagnose` pour re-vérifier sa valeur.

### Exemple attendu
```
[===diagnose===] declare -p ILLOGICAL_IMPULSE_VIRTUAL_ENV
declare -x ILLOGICAL_IMPULSE_VIRTUAL_ENV="/home/myself/.local/state/ags/.venv"
[---SUCCESS---]
```
Où `myself` représente le nom d'utilisateur actuel.

### Exemple inattendu 1
```
[===diagnose===] declare -p ILLOGICAL_IMPULSE_VIRTUAL_ENV
./diagnose: line 30: declare: ILLOGICAL_IMPULSE_VIRTUAL_ENV: not found
[---EXIT 1---]
```
Pour le cas ci-dessus :
- Il est très probable que vous utilisez encore l'ancien `~/.config/hypr/hyprland.conf`, et avez oublié de remplacer son contenu par `~/.config/hypr/hyprland.conf.new`. Exécutez juste `cd ~/.config/hypr;mv hyprland.conf{,.old};mv hyprland.conf{.new,}`.
- Assurez-vous que vous avez redémarré Hyprland.

### Exemple inattendu 2
```
[===diagnose===] declare -p ILLOGICAL_IMPULSE_VIRTUAL_ENV
declare -x ILLOGICAL_IMPULSE_VIRTUAL_ENV="\$XDG_STATE_HOME/ags/.venv"
[---SUCCESS---]
```
Pour le cas ci-dessus, le `$XDG_STATE_HOME` n'est pas étendu, ce qui semble vraiment bizarre (peut-être un bug Hyprland ?).
- Assurez-vous que quand vous exécutez `install.sh`, vous n'avez pas sauté et avez correctement exécuté le `install-python-packages()`, qui devrait vous donner un `~/.local/state/ags/.venv` non vide.
- Vous pouvez directement spécifier sa valeur dans `~/.config/hypr/custom/env.conf` comme :
```ini
env = ILLOGICAL_IMPULSE_VIRTUAL_ENV, /home/myself/.local/state/ags/.venv
```
Et n'oubliez pas de remplacer `myself` par le nom d'utilisateur actuel.

## Actions que vous devriez essayer au moins une fois
- Redémarrer Hyprland, ou redémarrer votre système, ce qui est nécessaire pour appliquer les changements de variables d'environnement.
- Si des choses liées à AGS (c'est-à-dire les "barres") ont un problème, changez un fond d'écran en appuyant sur `Super+Ctrl+T` et en choisissant une image dans la fenêtre qui s'affiche. Ce n'est pas utile à 100% cependant, surtout quand votre installation ou variable d'environnement a un problème en premier lieu.
- Le script `install.sh` est idempotent. Vous pouvez l'exécuter à nouveau quand vous voulez comme vous voulez.

## Comment obtenir des logs
- S'il y a un problème avec quelque chose, ouvrez un terminal (`Super`+`T`) et exécutez-le dans le shell. Cherchez des erreurs/avertissements qui pourraient être problématiques.
- La barre, barres latérales, fiche de rappel, etc. sont alimentés par AGS. (Astuce : Ce n'est pas waybar.) Ouvrez un terminal et exécutez `pkill agsv1; agsv1`.

## Informations diverses
- Cherchez autour de ce wiki (surtout cette page), et aussi les [issues](https://github.com/end-4/dots-hyprland/issues) et [discussions](https://github.com/end-4/dots-hyprland/discussions) existantes.
- Utilisez un peu de bon sens. Si vous n'arrivez pas à comprendre, [ouvrez une discussion](https://github.com/end-4/dots-hyprland/discussions) pour de l'aide.

# Quelques problèmes & solutions/contournements
## Thème/icônes/CSS AGS / barres cassé/ne fonctionne pas
> Référence : [end-4/dots-hyprland#1010](https://github.com/end-4/dots-hyprland/issues/1010)

Changez un fond d'écran en appuyant sur `Super+Ctrl+T` et en choisissant une image dans la fenêtre qui s'affiche.

## icône de certaines applications manquante dans dock/vue d'ensemble
> Référence : [end-4/dots-hyprland#497 comment](https://github.com/end-4/dots-hyprland/issues/497#issuecomment-2108212444) [end-4/dots-hyprland#487](https://github.com/end-4/dots-hyprland/issues/487)

Veuillez essayer les solutions/contournements suivants :
### Utilisez `gsettings` pour définir le thème d'icônes
:::note
Ceci est approprié pour la situation suivante :
- La classe de la fenêtre d'application a une icône correspondante exacte dans le thème d'icônes A, mais pas B.
- Vous utilisez le thème d'icônes B, ce qui signifie que le problème est résolu après que vous basculiez vers le thème d'icônes A.
:::

Par exemple [Papirus](https://github.com/PapirusDevelopmentTeam/papirus-icon-theme) (recommandé, car il couvre beaucoup d'applications) :
```sh
gsettings set org.gnome.desktop.interface icon-theme Papirus
```
Bien sûr vous devez l'installer d'abord, pour Arch Linux utilisez `sudo pacman -S papirus-icon-theme`.

### Définir les substitutions dans `user_options.jsonc` d'AGS
:::note
Ceci est approprié pour la situation suivante :
- L'application a plus d'un type de nom de classe de fenêtre (par exemple `foot` et `footclient`), mais seulement un d'entre eux (par exemple `foot`) a une icône correspondante exacte dans le thème d'icônes actuel.
- Vous êtes OK avec utiliser la même icône pour ces différentes classes de fenêtres (par exemple même icône pour `foot` et `footclient`).
:::

Éditez `~/.config/ags/user_options.jsonc`, ajoutez une entrée dans `icons.substitutions`, par exemple :
```js
    'icons': {
        substitutions: {
            'footclient': "foot",
        },
    },
```

:::note
Pour éditer ce fichier pour la première fois, voir les instructions au début de `user_options.jsonc` d'abord.
:::

### Définir le chemin de recherche d'icônes
Ceci est approprié pour vous avez un fichier d'icône séparément.

Modifiez le `icons.searchPaths` dans `~/.config/ags/user_options.jsonc` correctement.

## Les contrôles de musique n'apparaissent pas

> Référence : [end-4/dots-hyprland#168](https://github.com/end-4/dots-hyprland/issues/168)

- Assurez-vous que votre lecteur a le support Mpris (une liste : [lien Arch Wiki](https://wiki.archlinux.org/title/MPRIS))
- Si c'est un navigateur, installez l'extension Plasma Integration : [Firefox](https://addons.mozilla.org/en-US/firefox/addon/plasma-integration/) ou [Chromium](https://chrome.google.com/webstore/detail/plasma-integration/cimiefiiaegbelhefglklhhakcgmhkai) et `plasma-browser-integration` (ceci est pour Arch)

Puis, quand firefox lit du média, la commande suivante
```bash
dbus-send --print-reply --dest=org.freedesktop.DBus /org/freedesktop/DBus org.freedesktop.DBus.ListNames|grep mpris
```
la sortie devrait inclure
```plain
string "org.mpris.MediaPlayer2.plasma-browser-integration"
```
Seuls les noms "plasma-browser-integration" fonctionneront. les autres non.

Si pour une raison quelconque, firefox n'a toujours pas le dbus `org.mpris.MediaPlayer2.plasma-browser-integration` qui apparaît,
considérez les étapes suivantes :
1. Créez un nouveau profil en utilisant `firefox --ProfileManager`.
2. Lancez firefox avec le nouveau profil et installez l'extension Plasma Integration à nouveau.
3. Redémarrez firefox avec le nouveau profil et essayez à nouveau.
- _Note : `playerctl -F metadata` peut aussi être utile pour déboguer._

## Les icônes ne s'affichent pas. J'obtiens des textes bizarres à la place.
- Vous devez manquer la police Material Symbols. Vous pouvez télécharger la police manuellement puis la mettre dans `~/.local/share/fonts`
- Notez que c'est Material <u>**Symbols**</u>, pas Material <u>**Icons**</u> !
- N'oubliez pas `fc-cache -fv` pour actualiser le cache de polices. Un redémarrage marchera aussi.

## `loginctl lock-session` ne fait rien
> Référence : [end-4/dots-hyprland#278](https://github.com/end-4/dots-hyprland/issues/278)

Selon [ce post sur les Forums Arch Linux](https://bbs.archlinux.org/viewtopic.php?pid=1311990#p1311990) :
> Quelque chose doit écouter les signaux dbus de systemd-logind pour que cela fonctionne.

Hypridle est capable d'être cette "chose", ce qui signifie que vous devez vous assurer qu'il fonctionne,
et alors `loginctl lock-session` enverra un signal à hypridle,
en conséquence hypridle verrouillera l'écran en exécutant le `$lock_cmd` défini dans sa config `~/.config/hypr/hypridle.conf`.

Voir [Wiki Hyprland](https://wiki.hyprland.org/Hypr-Ecosystem/hypridle/#configuration) pour plus.

## Terminal : Pourquoi ne puis-je pas interrompre avec Ctrl+C ?
- Dans `foot`, Ctrl+C est configuré pour copier le texte. Pour interrompre, utilisez Ctrl+Shift+C
- Vous ne voulez pas ceci ?
  - Pour supprimer cette liaison : dans `~/.config/foot/foot.ini`, commentez ou supprimez la ligne qui dit `clipboard-copy=Control+c`
  - Peut-être que si vous utilisez beaucoup d'applications terminal, ce serait une bonne idée d'utiliser un terminal plus riche en fonctionnalités

## Freeze aléatoire
:::note
Ceci n'est pas lié à illogical-impulse techniquement.
:::
Voir https://github.com/end-4/dots-hyprland/issues/746 .

# Solutions&contournements de problèmes dépréciés
Le contenu ci-dessous n'est plus utile car les choses ont changé.

Les garder ici au cas où nous en aurions besoin à nouveau à l'avenir.
## L'installation d'AGS a échoué
### `PermissionError: [Errno 13] Permission denied: '/usr/local/lib/libgvc.so'`
Exécutez ceci pour vérifier si ce fichier appartient à un paquet (très probablement pas, car il est dans `/usr/local`)
```bash
pacman -Qo /usr/local/lib/libgvc.so
```
Si pas, alors c'est probablement sûr de juste le supprimer. Pour ce faire, exécutez ceci :
```bash
sudo mv /usr/local/lib/libgvc.so /tmp/
```

### Autres erreurs
Supprimez `./cache/ags` et installez-le à nouveau.

## L'installation d'Hyprland a échoué
Parfois le paquet AUR n'installe pas toutes les dépendances pour vous. Hyprland évolue toujours et cela arrive quand quelque chose de nouveau est ajouté.
- Vérifiez les logs et voyez s'ils vous disent d'installer quelque chose, puis tentez de le construire à nouveau.
- Note : Vous pourriez avoir à vider `~/.cache/yay`.
